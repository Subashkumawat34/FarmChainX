<div class="bg-slate-900 min-h-screen p-8 sm:p-12">
  <div class="max-w-7xl mx-auto">
    <div
      class="backdrop-blur-3xl bg-slate-800/70 border border-slate-700/50 rounded-3xl shadow-2xl overflow-hidden"
    >
      <div
        class="px-6 sm:px-10 py-6 sm:py-8 bg-gradient-to-r from-black-700 to-green-800 relative border-b border-slate-700/50"
      >
        <h2 class="text-3xl sm:text-4xl font-extrabold text-white tracking-tight">
          User Management
        </h2>
        <p class="text-indigo-300 mt-1 text-base sm:text-lg">
          Manage platform roles and permissions for all active accounts.
        </p>
      </div>

      <div *ngIf="isLoading" class="p-10 text-center text-indigo-400 text-lg">
        <p class="animate-pulse">Loading users...</p>
      </div>

      <div *ngIf="!isLoading" class="overflow-x-auto">
        <table class="w-full min-w-[700px] divide-y divide-slate-700/30">
          <thead class="bg-slate-800/50">
            <tr>
              <th
                class="px-6 sm:px-10 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-100"
              >
                Name
              </th>
              <th
                class="px-6 sm:px-10 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-100"
              >
                Email
              </th>
              <th
                class="px-6 sm:px-10 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-100"
              >
                Primary Role
              </th>
              <th
                class="px-6 sm:px-10 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-100"
              >
                Action
              </th>
            </tr>
          </thead>

          <tbody class="divide-y divide-slate-700/30">
            <tr
              *ngFor="let user of users"
              class="hover:bg-slate-700/40 transition duration-150 ease-in-out"
            >
              <td class="px-6 sm:px-10 py-4 font-medium text-white whitespace-nowrap">
                {{ user.name }}
              </td>

              <td class="px-6 sm:px-10 py-4 text-indigo-300 whitespace-nowrap text-sm">
                {{ user.email }}
              </td>

              <td class="px-6 sm:px-10 py-4 whitespace-nowrap">
                <span
                  class="px-3 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider"
                  [ngClass]="roleClass(user.primaryRole)"
                >
                  {{ user.primaryRole }}
                </span>
              </td>

              <td class="px-6 sm:px-10 py-4 whitespace-nowrap">
                <button
                  *ngIf="!user.isAdmin"
                  (click)="promote(user.id)"
                  class="bg-gradient-to-r from-pink-500 to-red-600 hover:from-pink-600 hover:to-red-700 text-white font-semibold text-sm py-2.5 px-5 rounded-lg shadow-md hover:shadow-lg transition duration-300 ease-in-out disabled:opacity-50"
                  [disabled]="user.isPromoting"
                >
                  <span *ngIf="!user.isPromoting" class="text-emerald-400 font-semibold text-sm"
                    >Promote to Admin</span
                  >
                  <span *ngIf="user.isPromoting">Processing...</span>
                </button>
                <span *ngIf="user.isAdmin" class="text-emerald-400 font-semibold text-sm"
                  >ADMINISTRATOR</span
                >
              </td>
            </tr>

            <tr *ngIf="users.length === 0 && !isLoading">
              <td colspan="4" class="px-10 py-10 text-center text-gray-500 text-lg">
                No users found.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
